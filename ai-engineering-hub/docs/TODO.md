# AI Engineering Hub - 機能改善TODO

## プロジェクト分析結果
2025年1月時点でのAI Engineering Hubブログシステムの状況分析と必要な改善項目をまとめています。

## 現在の実装状況

### ✅ 実装済み機能
- Next.js 14アプリケーション基盤（App Router）
- TypeScript設定
- Tailwind CSS スタイリング
- **MicroCMS連携完了**（本番環境で稼働中）
- **MCP Server連携完了**（Claude Desktop自動投稿機能稼働）
- 基本ページ構造（トップ、記事詳細、カテゴリ、検索等）
- 記事表示・一覧機能
- カテゴリ別記事表示
- タグ別記事表示
- 基本的な検索機能
- レスポンシブデザイン
- SEO基本設定（メタデータ、sitemap.xml、robots.txt）
- 静的生成（SSG）対応
- 本番デプロイ環境（Vercel）

## 🚨 緊急度高：必須機能の不足

### 1. ~~CMS連携の完全化~~ ✅ **完了**
- [x] **MicroCMS環境変数設定** ✅
- [x] **MicroCMSスキーマ設定** ✅
- [x] **本番環境連携** ✅

### 2. ~~MCP Server連携~~ ✅ **完了**
- [x] **Claude Desktop連携** ✅
- [x] **自動投稿機能** ✅

### 3. コンテンツ管理機能強化
- [ ] **記事編集フロー最適化**
  - 記事更新時の再デプロイ自動化確認
  - プレビュー機能の動作確認
- [ ] **🚨 画像生成・管理運用フロー確立**（緊急度高）
  - Claude Desktop記事投稿時の画像対応策
  - 画像生成からアップロードまでの自動化検討
  - 詳細は「画像運用フロー設計」セクション参照
- [ ] **バックアップ・復旧機能**
  - コンテンツのバックアップ仕組み確立

## 🔧 機能拡張：ユーザビリティ向上

### 4. 検索・フィルタ機能強化
- [ ] **高度な検索機能**
  - 全文検索精度向上
  - 検索結果ハイライト表示
  - 検索履歴保存
- [ ] **フィルタリング機能**
  - 複数条件組み合わせ
  - 保存済みフィルタ設定
  - フィルタリング結果URL共有

### 5. ユーザーエンゲージメント
- [ ] **コメント機能**
  - 外部サービス連携（Disqus等）または独自実装検討
- [ ] **ソーシャルシェア機能**
  - Twitter、LinkedIn、Facebook連携
  - URLコピー機能
- [ ] **いいね・ブックマーク機能**
  - ローカルストレージ活用
  - 後でユーザー認証と連携可能な設計

### 6. SEO・アクセシビリティ強化
- [ ] **構造化データ完全対応**
  - Article schema実装確認
  - BreadcrumbList schema追加
  - Organization schema追加
- [ ] **Core Web Vitals最適化**
  - 画像遅延読み込み最適化
  - フォント読み込み最適化
  - JavaScript最適化
- [ ] **アクセシビリティ対応**
  - ARIA属性追加
  - キーボードナビゲーション対応
  - スクリーンリーダー対応

## 🚀 中期的拡張：高度な機能

### 7. ~~Claude Desktop連携（MCP Server）~~ ✅ **完了**  
- [x] **MCP Server開発** ✅
- [x] **自動投稿機能** ✅
- [ ] **コンテンツ分析機能強化**
  - 記事品質分析機能
  - 読みやすさスコア算出
  - SEO最適化提案機能

### 8. 分析・運用機能
- [ ] **アクセス解析**
  - Google Analytics設定
  - 記事別パフォーマンス追跡
- [ ] **パフォーマンス監視**
  - エラー監視（Sentry等）
  - パフォーマンス監視
- [ ] **自動デプロイ**
  - GitHub Actions設定
  - プレビュー環境構築

## 🎨 UI/UX改善

### 9. デザインシステム強化
- [ ] **カラーパレット統一**
  - CSS変数での色管理統一
  - ダークモード対応検討
- [ ] **コンポーネント体系化**
  - Storybook導入検討
  - デザイントークン管理
- [ ] **レスポンシブデザイン最適化**
  - モバイルファースト設計確認
  - タブレット表示最適化

### 10. インタラクション改善
- [ ] **ローディング状態管理**
  - スケルトンローディング実装
  - プログレスインジケーター
- [ ] **エラーハンドリング**
  - ユーザーフレンドリーなエラー表示
  - 再試行機能
- [ ] **ページ遷移**
  - ページ遷移アニメーション
  - 戻るボタンの動作最適化

## 📊 データ・セキュリティ

### 11. データ管理
- [ ] **バックアップ機能**
  - MicroCMSデータバックアップ
  - 設定ファイルバックアップ
- [ ] **データ移行**
  - 他CMSからの移行ツール検討
  - データインポート/エクスポート機能

### 12. セキュリティ強化
- [ ] **セキュリティヘッダー**
  - next.config.tsでセキュリティヘッダー設定
  - CSP（Content Security Policy）設定
- [ ] **環境変数管理**
  - 機密情報の適切な管理
  - デプロイ時の環境変数検証

## 実装優先度（更新版）

### ~~Phase 1（緊急）：基盤完成~~ ✅ **完了**
1. ~~MicroCMS環境変数設定とスキーマ設定~~ ✅
2. ~~実際のCMS連携動作確認~~ ✅  
3. ~~MCP Server開発・連携~~ ✅

### 🚨 Phase 2A（緊急）：画像運用フロー確立
1. **プレースホルダー機能**をMCP Serverに実装（最優先）
2. **画像差し替え手順書**作成・運用フロー確立
3. **汎用画像ライブラリ**構築（短期）

### Phase 2B（短期）：ユーザビリティ向上
1. ソーシャルシェア機能実装
2. 検索・フィルタ機能強化
3. コメント機能実装
4. SEO・パフォーマンス最適化

### Phase 3（中期）：分析・自動化
1. **AI画像生成API連携**（画像フロー完全自動化）
2. アクセス解析・監視機能
3. コンテンツ分析機能強化
4. UI/UX改善（ダークモード等）

---

# 📸 画像運用フロー設計

## 現在の課題
- Claude Desktopからの記事投稿時に画像生成ができない
- MCP Server経由の自動投稿で画像が含まれない記事が投稿される
- アイキャッチ画像やコンテンツ内画像の手動作業が必要

## 運用フロー案

### 🔄 フロー1: プレースホルダー + 後付け方式（推奨・短期実装）

**ワークフロー：**
1. Claude Desktop → MCP Server → 記事投稿（画像プレースホルダー付き）
2. 手動で画像生成・選定（DALL-E/Midjourney/フリー素材）
3. MicroCMS管理画面で画像アップロード・差し替え
4. 記事公開・再デプロイ

**実装項目：**
- [ ] MCP Serverに画像プレースホルダー挿入機能追加
- [ ] 記事テンプレートに`<!-- IMAGE_PLACEHOLDER: 説明文 -->`形式の記載
- [ ] MicroCMSでの画像差し替え手順書作成
- [ ] Webhookによる自動再デプロイ確認

**メリット：** 実装が簡単、柔軟性が高い  
**デメリット：** 手動作業が必要

---

### 🤖 フロー2: 外部AI連携による半自動化（中期実装）

**ワークフロー：**
1. Claude Desktop → MCP Server → 記事内容分析
2. MCP Server → 画像生成API（DALL-E/Stability AI）→ 自動画像生成
3. 生成画像 → MicroCMS自動アップロード
4. 記事 + 画像で自動投稿・公開

**実装項目：**
- [ ] MCP ServerにOpenAI DALL-E API連携機能追加
- [ ] 記事内容から画像プロンプト自動生成機能
- [ ] MicroCMSメディアライブラリAPI連携
- [ ] 画像生成〜アップロード〜記事投稿の自動化
- [ ] 生成画像の品質チェック・承認フロー

**メリット：** 大幅な自動化、一貫性のある画像  
**デメリット：** 実装コスト高、外部API費用

---

### 📚 フロー3: 画像ライブラリ活用方式（短期実装）

**ワークフロー：**
1. 事前に画像ライブラリをMicroCMSに構築
2. Claude Desktop → MCP Server → キーワードベース画像選択
3. 関連画像を自動選択して記事投稿
4. 必要に応じて手動で画像差し替え

**実装項目：**
- [ ] MicroCMSに汎用的な画像ライブラリ構築
- [ ] 画像のタグ・カテゴリ分類システム
- [ ] MCP Serverでキーワードマッチング機能
- [ ] 記事内容と画像の自動マッチング機能

**メリット：** 中程度の自動化、コスト効率良い  
**デメリット：** 画像の独自性が低い

---

### 🔧 フロー4: ハイブリッド運用（推奨・長期運用）

**段階的実装：**
1. **Phase A:** フロー1（プレースホルダー方式）で運用開始
2. **Phase B:** フロー3（画像ライブラリ）を追加実装
3. **Phase C:** フロー2（AI生成）を長期的に実装

**運用方法：**
- 日常的な記事：フロー1 + フロー3（手動＋ライブラリ）
- 重要な記事：フロー2（AI生成）+ 手動調整
- 緊急投稿：フロー1（プレースホルダーのみ）

---

## 実装優先度

### 最優先（1-2週間）
1. **プレースホルダー機能**をMCP Serverに実装
2. **画像差し替え手順書**作成
3. **MicroCMS画像管理フロー**確立

### 短期（1ヶ月）
1. **汎用画像ライブラリ**構築
2. **キーワードマッチング機能**実装
3. **画像最適化自動化**

### 中期（2-3ヶ月）
1. **外部AI画像生成API**連携
2. **自動画像生成機能**実装
3. **品質チェックフロー**構築

---

## 技術的検討事項

### MCP Server拡張仕様
```typescript
interface ImageGenerationFunctions {
  // プレースホルダー挿入
  insertImagePlaceholder(content: string, description: string): string
  
  // 画像ライブラリ検索
  searchImageLibrary(keywords: string[]): Promise<Image[]>
  
  // 外部AI画像生成
  generateImageWithDALLE(prompt: string): Promise<string>
  
  // MicroCMS画像アップロード
  uploadImageToMicroCMS(imageData: Buffer, filename: string): Promise<string>
}
```

### 環境変数追加
```bash
# 画像生成関連
OPENAI_API_KEY=sk-...
STABILITY_AI_API_KEY=...
IMAGE_STORAGE_BUCKET=...
```

---

## 注意事項
- ~~現在モックデータで動作しているため、MicroCMS連携が最優先~~ ✅ **解決済み**
- ~~Claude Desktopとの連携（MCP Server）は独自性の高い機能として重要~~ ✅ **完了**
- **画像運用フローの確立が新たな最優先課題**
- 企業向けとエンジニア向けの両方に対応する設計が必要
- 現在は基盤が完成し運用段階のため、ユーザビリティ向上が次の重点課題